<!-- 
based off http://blog.monstuff.com/Flash4AJAX/static/Xdomain.html
-->
<html>
<head>
<title>Cross-domain with Flash 8</title>
</head>
<body>                                         
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="FlashHelper.js"></script>
<script type="text/javascript">
FlashHelper.onload = startApp;
function mycallback() {
    alert("callback");
    var xml = FlashHelper.getFlash().GetVariable("retText");
}

function startApp(fs) {
    if (!fs) { alert("Flash not loaded"); return; }
    fs.Debug();    
    $("response").value = "ready";
}


function displayResponse() {
    var response = FlashHelper.getFlash().GetVariable("retText");
    $("response").value = response;
    alert(response);
}

function makeCall() {
    var url = $("url").value;
    var method = $("method").value;
    var body = $("body").value;
    var contentType = $("contentType").value;
    var fs = FlashHelper.getFlash();
    fs.XmlHttp(url, "displayResponse", method, body, contentType);
    $("response").value = "loading...";
}
</script>

<form>
URL: <input type="text" id="url" value="http://webappdemo/wordpress/wp-admin/user-new.php" size="100"/><br />             
Verb: <input type="text" id="method" value="POST" /><br />

Body: <textarea id="body" rows="10" cols="100"></textarea><br />
Content Type: <input type="text" id="contentType" value="application/x-www-form-urlencoded" size="50"/><br />
<button onclick="makeCall(); return false;" value="Make HTTP request (raw API)">Make HTTP request (raw API)</button><br />
<br />
<br />
<textarea id="response" rows="20" cols="100"></textarea><br />

</form>

<script type="text/javascript">
FlashHelper.writeFlash();
</script>
</body>
</html>
